/* === Contenedor: fuerza tema claro y evita inversiones automáticas === */
.compra-form {
  background: #ffffff;
  color: #0f172a;
  color-scheme: light;        /* dice al navegador: este bloque es claro */
  forced-color-adjust: none;  /* evita que OS/extensiones “oscurezcan” este bloque */
  --control-h: 42px;          /* altura estándar para inputs y botones */
}

/* Texto/inputs legibles en ambos modos */
.compra-form, 
.compra-form * {
  -webkit-text-size-adjust: 100%;
}

.compra-form input,
.compra-form select,
.compra-form textarea {
  background: #ffffff !important;
  color: #0f172a !important;
  caret-color: #0f172a;
  border: 1px solid #e5e7eb;
  border-radius: 10px;
  min-height: var(--control-h);
  padding: 10px 12px;
  line-height: 1.2;
  outline: none;
  transition: border-color .15s ease, box-shadow .15s ease, background .15s ease;
}

/* Opciones del select (el popup también queda blanco) */
.compra-form select option {
  background: #ffffff;
  color: #0f172a;
}

/* Placeholders y autofill (Chrome) */
.compra-form ::placeholder { color: #94a3b8; opacity: 1; }
.compra-form input:-webkit-autofill {
  -webkit-text-fill-color: #0f172a;
  -webkit-box-shadow: 0 0 0 1000px #ffffff inset;
  caret-color: #0f172a;
}

/* Estados */
.compra-form .control:focus,
.compra-form input:focus,
.compra-form select:focus,
.compra-form textarea:focus {
  border-color: #94a3b8;
  box-shadow: 0 0 0 3px rgba(148,163,184,.25);
}

.compra-form .control.control--readonly,
.compra-form input[readonly],
.compra-form input[disabled],
.compra-form select[disabled] {
  background: #f8fafc !important;
  color: #475569 !important;
}

/* Grid responsivo (ajústalo a tu layout si ya tienes uno) */
.compra-form .form-grid {
  display: grid;
  gap: 12px;
  grid-template-columns: 1fr;
}
@media (min-width: 640px) { .compra-form .form-grid { grid-template-columns: repeat(3, 1fr); } }
@media (min-width: 1024px){ .compra-form .form-grid { grid-template-columns: repeat(5, 1fr); } }
.compra-form .col-span-full { grid-column: 1 / -1; }

/* Campos & labels */
.compra-form .field { display: flex; flex-direction: column; gap: 6px; }
.compra-form .label { font-size: .85rem; color: #334155; font-weight: 600; }

/* Fila input + botón (si usas botón “Añadir” junto a un select) */
.compra-form .input-row {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 8px;
  align-items: center;
}

/* Botones: blancos y visibles en ambos modos */
.compra-form .btn {
  background: #ffffff;
  color: #0f172a;
  border: 1px solid #e5e7eb;
  border-radius: 10px;
  padding: 10px 14px;
  font-weight: 600;
  font-size: .9rem;
  cursor: pointer;
  transition: transform .06s ease, box-shadow .15s ease, background .15s ease, border-color .15s ease;
}
.compra-form .btn:hover { box-shadow: 0 4px 16px rgba(2, 6, 23, .08); }
.compra-form .btn:active { transform: translateY(1px); }
.compra-form .btn[disabled] { opacity: .6; cursor: not-allowed; box-shadow: none; }
.compra-form .btn-sm { padding: 6px 10px; font-size: .85rem; min-height: var(--control-h); }
.compra-form .btn-inline { margin: 0; height: var(--control-h); display: inline-flex; align-items: center; }

/* Botón primario (azul) sigue viéndose bien en modo oscuro del SO */
.compra-form .btn-primary { background: #2563eb; border-color: #2563eb; color: #ffffff; }
.compra-form .btn-primary:hover { background: #1e40af; border-color: #1e40af; }

/* Caja blanca (para la tabla de marcas/porcentajes, etc.) */
.compra-form .box {
  background: #ffffff;
  border: 1px solid #e5e7eb;
  border-radius: 14px;
  padding: 12px;
}
.compra-form .brands-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 12px;
}
@media (max-width: 768px) { .compra-form .brands-grid { grid-template-columns: repeat(2, 1fr); } }

/* Utilidades */
.compra-form .muted { color: #94a3b8; }
.compra-form .text-sm { font-size: .9rem; }
.compra-form .font-semibold { font-weight: 600; }
.compra-form .flex { display: flex; }
.compra-form .items-center { align-items: center; }
.compra-form .justify-between { justify-content: space-between; }
.compra-form .gap-2 { gap: 8px; }
.compra-form .pt-2 { padding-top: .5rem; }
.compra-form .mb-2 { margin-bottom: .5rem; }
.compra-form .mb-3 { margin-bottom: .75rem; }

/* Errores y accesibilidad */
.compra-form .error { color: #b91c1c; font-size: .8rem; margin-top: 2px; }
.compra-form :focus-visible { outline: 2px solid #94a3b8; outline-offset: 2px; }
.compra-form ::selection { background: #dbeafe; color: #0f172a; }

/* === Ajustes específicos cuando el SO está en modo oscuro ===
   Mantenemos blancos, pero subimos contraste de bordes/sombras. */
@media (prefers-color-scheme: dark) {
  .compra-form {
    background: #ffffff;  /* seguimos blanco */
  }
  .compra-form input,
  .compra-form select,
  .compra-form textarea {
    border-color: #d1d5db; /* un poco más marcado en pantallas oscuras */
  }
  .compra-form .btn { border-color: #d1d5db; }
  .compra-form .box { border-color: #d1d5db; }
}

/* === Modo Alto Contraste del SO ===
   Permitimos que el sistema gestione colores para legibilidad. */
@media (forced-colors: active) {
  .compra-form { forced-color-adjust: auto; }
}
